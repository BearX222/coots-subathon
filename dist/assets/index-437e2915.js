(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();class m{constructor(e){this.element=e,this.messages=[]}addMessage(e,i){let a=document.createElement("div");a.classList.add("message"),a.innerHTML=`<span class="user" style="color: ${CHAT_COLORS_LIST_GLOBAL[e.charCodeAt(0)]};">${e}: </span>${i}`,this.element.appendChild(a),this.messages.push({name:e,color:CHAT_COLORS_LIST_GLOBAL[e.charCodeAt(0)],text:i,text:i}),this.element.scrollTo(0,this.element.scrollHeight)}}class p{constructor(e){this.element=e,this.carPosition=2,this.pickupFrame=0,this.score=0,this.lives=3,this.item=0,this.createScene(),setTimeout(()=>{this.spawnItem()},5e3),document.addEventListener("keypress",i=>{this.keyHandler(i)}),this.itemInterval=setInterval(()=>{this.updateItem()},500)}createScene(){const e=document.createElement("div");e.classList.add("carminigame");const i=document.createElement("img");i.classList.add("road"),i.src="./assets/images/carMinigame-road.gif",this.pickup=document.createElement("img"),this.pickup.id="pickup",this.pickup.dataset.xpos="2",this.pickup.src="./assets/images/pickup/pickup0.png",this.animatePickup(),this.coin=document.createElement("img"),this.coin.id="coin",this.coin.classList.add("item"),this.coin.src="./assets/images/gold.png",this.coin.style.display="none",this.rock=document.createElement("img"),this.rock.id="rock",this.rock.classList.add("item"),this.rock.src="./assets/images/rock.png",this.rock.style.display="none",this.scoreCounter=document.createElement("div"),this.scoreCounter.classList.add("score"),this.scoreCounter.innerText="SCORE: "+this.score,this.livesCounter=document.createElement("div"),this.livesCounter.classList.add("lives"),this.livesCounter.innerText="LIVES: "+this.lives;let a=[];for(let s=0;s<5;s++){let o=document.createElement("img");o.src="./assets/images/cloud.png",o.classList.add("cloud"),o.style.top=Math.floor(Math.random()*31)+"%",o.style.left=Math.floor(Math.random()*100)+"%",o.style.height=Math.floor(Math.random()*5)+8+"%",a.push(o)}let t=document.createElement("div");t.classList.add("buttons"),t.innerHTML="<img src='./assets/images/buttons/buttonA.png'> <img src='./assets/images/buttons/buttonD.png'>",e.appendChild(i),e.appendChild(this.pickup),e.appendChild(this.scoreCounter),e.appendChild(this.livesCounter),e.appendChild(this.coin),e.appendChild(this.rock),a.forEach(s=>{e.appendChild(s)}),e.appendChild(t),this.wrapper=e,this.element.appendChild(e),document.querySelector("#audio-player").src="./assets/audio/CarRide.mp3",document.querySelector("#audio-player").play()}animatePickup(){this.pickupInterval=setInterval(()=>{this.pickupFrame<3?this.pickupFrame++:this.pickupFrame=0,this.pickup.src=`./assets/images/pickup/pickup${this.pickupFrame}.png`},100)}keyHandler(e){(e.key=="a"||e.key=="A")&&this.carPosition>1&&(this.carPosition--,this.pickup.dataset.xpos=this.carPosition),(e.key=="d"||e.key=="D")&&this.carPosition<3&&(this.carPosition++,this.pickup.dataset.xpos=this.carPosition)}spawnItem(){this.item==0?(this.item=1,this.coin.dataset.xpos=Math.floor(Math.random()*3)+1,this.coin.dataset.ypos=1,this.coin.style.display="block"):(this.item=0,this.rock.dataset.xpos=Math.floor(Math.random()*3)+1,this.rock.dataset.ypos=1,this.rock.style.display="block")}updateItem(){this.item==1?(this.coin.dataset.ypos<=3&&this.coin.dataset.ypos++,this.coin.dataset.ypos==4&&(this.carPosition==this.coin.dataset.xpos&&(this.score++,this.scoreCounter.innerText="SCORE: "+this.score,document.querySelector("#audio-effects").src="./assets/audio/coin.wav",document.querySelector("#audio-effects").play()),this.coin.style.display="none",this.coin.dataset.ypos=1,this.spawnItem())):(this.rock.dataset.ypos<=3&&this.rock.dataset.ypos++,this.rock.dataset.ypos==3&&(this.carPosition==this.rock.dataset.xpos&&(this.lives--,this.livesCounter.innerText="LIVES: "+this.lives,document.querySelector("#audio-effects").src="./assets/audio/rock.wav",document.querySelector("#audio-effects").play(),this.lives<=0&&this.gameOver()),this.rock.style.display="none",this.rock.dataset.ypos=1,this.spawnItem()))}gameOver(){clearInterval(this.itemInterval),clearInterval(this.pickupInterval);const e=document.createElement("div");e.classList.add("game-over"),e.innerText="GAME OVER!",this.wrapper.appendChild(e),document.querySelector("#audio-player").pause(),this.coin.style.display="none",this.rock.style.display="none",this.coin.src="",this.rock.src="",setTimeout(()=>{this.endGame(),this.carPosition=2,this.pickupFrame=0,this.score=0,this.lives=3,this.item=0,this.createScene(),setTimeout(()=>{this.spawnItem()},5e3),this.itemInterval=setInterval(()=>{this.updateItem()},500)},5e3)}endGame(){clearInterval(this.itemInterval),clearInterval(this.pickupInterval),document.querySelector("#audio-player").src="./assets/audio/CarRide.mp3",document.querySelector("#audio-player").pause(),this.element.innerHTML=""}}document.querySelector("#start-game").addEventListener("click",()=>{h()});document.querySelector("#display-credits").addEventListener("click",()=>{y()});document.querySelector("#display-menu").addEventListener("click",()=>{d()});document.querySelector("#exit-to-menu").addEventListener("click",()=>{c.endGame(),document.querySelector("#game").style.display="none",document.querySelector("#audio-player").src="./assets/audio/HappySong.mp3",document.querySelector("#audio-player").play(),document.querySelector("#chat").innerHTML="",document.querySelector("#global-time-counter").innerText="00:00",clearInterval(l),d()});const n=()=>{document.querySelector("#audio-player").play(),document.removeEventListener("mousedown",n)};document.addEventListener("mousedown",n);let c,l;function h(){document.querySelector("#menu").style.display="none",document.querySelector("#game").style.display="flex",document.querySelector("#credits").style.display="none";var r=1,e=1;const i=new m(document.querySelector("#chat")),a=Date.now();l=setInterval(()=>{const s=Date.now(),o=new Date(s-a),u=String(o.getMinutes()).padStart(2,"0")+":"+String(o.getSeconds()).padStart(2,"0");r+=r*(1e-4+Math.random()*.0199),e+=e*(5e-4+Math.random()*.0345),document.querySelector("#global-time-counter").innerText=u,document.querySelector("#global-subs-counter").innerText=Math.floor(r),document.querySelector("#global-viewers-counter").innerText=Math.floor(e)},1e3);function t(){setTimeout(()=>{i.addMessage(USER_NAME_LIST_GLOBAL[Math.floor(Math.random()*USER_NAME_LIST_GLOBAL.length)],GOOD_CHAT_LIST_GLOBAL[Math.floor(Math.random()*GOOD_CHAT_LIST_GLOBAL.length)]),t()},Math.max(500,3e4-Math.floor(e)*10))}t(),c=new p(document.querySelector("#minigames-display"))}function y(){document.querySelector("#menu").style.display="none",document.querySelector("#game").style.display="none",document.querySelector("#credits").style.display="flex"}function d(){document.querySelector("#menu").style.display="block",document.querySelector("#game").style.display="none",document.querySelector("#credits").style.display="none"}
